<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>404 Test</title>
  </head>
  <body>
    <h1>404 Test Page</h1>
    <p>If you can see this page, the 404.html redirect is not working properly.</p>
    <p>This should redirect to the main app.</p>
    <script>
      // Test the redirect logic
      var pathSegmentsToKeep = 1
      var l = window.location
      console.log('Current URL:', l.href)
      console.log('Pathname:', l.pathname)

      // Simulate the redirect
      var newUrl =
        l.protocol +
        '//' +
        l.hostname +
        (l.port ? ':' + l.port : '') +
        l.pathname
          .split('/')
          .slice(0, 1 + pathSegmentsToKeep)
          .join('/') +
        '/?/' +
        l.pathname.slice(1).split('/').slice(pathSegmentsToKeep).join('/').replace(/&/g, '~and~') +
        (l.search ? '&' + l.search.slice(1).replace(/&/g, '~and~') : '') +
        l.hash

      console.log('Redirect URL:', newUrl)

      // Auto redirect after 2 seconds
      setTimeout(() => {
        window.location.replace(newUrl)
      }, 2000)
    </script>
  </body>
</html>
