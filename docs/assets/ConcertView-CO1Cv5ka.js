import{d as w,a,b as o,n as P,k as O,t as d,e as T,F as y,f as k,h as e,_ as C,c as f,i as D,r as v,o as A,w as B,g as l}from"./index-CUpd_P7g.js";import{a as E,g as u}from"./pathUtils-DhIhMTi_.js";import{H as V,O as F,T as H}from"./OverlapSecondSection-Dr9QsMVL.js";import{C as G,O as N,T as R}from"./ContentSection-B09V7TDm.js";import{C as L}from"./ConcertItemSection-CmPOuob8.js";const M={class:"title-section"},q={class:"title-wrapper"},J={class:"main-content"},K={class:"polaroid-section"},Q={class:"polaroid-frame"},U={class:"polaroid-caption"},W={class:"content-section"},X={class:"header-section"},Y={class:"title-text"},Z={key:0,class:"subtitle-text"},tt={class:"playlist-section"},et={class:"part-title"},nt={class:"song-list"},st=w({__name:"TitleSection",props:{titleText:{default:"成都站歌单"},picture:{default:"/src/assets/background/Chengdu.jpg"},pictureTitle:{default:"成都印象"},subtitle:{default:"成都东安湖体育公园多功能体育馆 - 2025/05/24"},content:{default:()=>[]}},setup(j){return(i,m)=>(e(),a("div",M,[o("div",q,[o("div",J,[o("div",K,[o("div",Q,[o("div",{class:"polaroid-image",style:P({backgroundImage:`url(${O(E)(i.picture)})`})},null,4),o("div",U,d(i.pictureTitle),1)])]),o("div",W,[o("div",X,[o("h2",Y,d(i.titleText),1),i.subtitle?(e(),a("div",Z,d(i.subtitle),1)):T("",!0)]),o("div",tt,[(e(!0),a(y,null,k(i.content,(_,g)=>(e(),a("div",{key:g,class:"playlist-column"},[o("h3",et,d(_.tab),1),o("ul",nt,[(e(!0),a(y,null,k(_.song,(p,r)=>(e(),a("li",{key:r,class:"song-item"},d(p),1))),128))])]))),128))])])])])]))}}),ot=C(st,[["__scopeId","data-v-64a2303b"]]),at={class:"concert-page"},it={key:0,class:"loading"},ct={key:1,class:"error"},lt={key:2,class:"concert-content"},rt={key:8,class:"unknown-component"},ut=w({__name:"ConcertView",setup(j){const i=D(),m=f(()=>i.params.city),_=f(()=>i.path.includes("/open/")?"open":"universe"),g=v(!0),p=v(""),r=v(null),x=f(()=>r.value?.content?[...r.value.content].sort((s,n)=>s.index-n.index):[]),z=s=>s===2||s===4?2:s===6?3:2,S=async()=>{try{g.value=!0,p.value="";const s=_.value,n=m.value,t=`concert/${s}`;let c=u(`${t}/concert_new.json`);s==="universe"?n==="beijing"||n==="beijing2024"?c=u(`${t}/concert_beijing2024.json`):n==="guangzhou"||n==="guangzhou2025"?c=u(`${t}/concert_guangzhou2025.json`):n==="chengdu"||n==="chengdu2025"?c=u(`${t}/concert_chengdu2025.json`):n==="shanghai"||n==="shanghai2025"?c=u(`${t}/concert_shanghai2025.json`):(n==="ningbo"||n==="ningbo2025")&&(c=u(`${t}/concert_ningbo2025.json`)):s==="open"&&(n==="guangzhou"||n==="guangzhou2023")&&(c=u(`${t}/concert_guangzhou2023.json`));const h=await fetch(c);if(!h.ok)throw new Error(`Failed to fetch concert data: ${h.status} ${h.statusText}`);const b=await h.json();if(Array.isArray(b)){const $=b.find(I=>I.title===n);if(!$)throw new Error(`未找到城市 ${n} 的音乐会数据`);r.value=$}else r.value=b}catch(s){p.value=s instanceof Error?s.message:"加载数据失败",console.error("加载音乐会数据失败:",s)}finally{g.value=!1}};return A(()=>{S()}),B(()=>[i.params.city,i.path],()=>{S()}),(s,n)=>(e(),a("div",at,[g.value?(e(),a("div",it,"加载中...")):p.value?(e(),a("div",ct,d(p.value),1)):r.value?(e(),a("div",lt,[(e(!0),a(y,null,k(x.value,(t,c)=>(e(),a(y,{key:c},[t.type==="HeroSection"?(e(),l(V,{key:0,"background-image":t.background_image,title:t.title,"title-align":t.title_align,"title-margin":t.title_margin},null,8,["background-image","title","title-align","title-margin"])):t.type==="ContentSection"?(e(),l(G,{key:1,title:t.title,paragraphs:t.paragraphs},null,8,["title","paragraphs"])):t.type==="TitleSection"?(e(),l(ot,{key:2,"title-text":t.title_text||"",subtitle:t.subtitle||"",picture:t.picture||"","picture-title":t.picture_title||"",content:Array.isArray(t.content)?t.content:[]},null,8,["title-text","subtitle","picture","picture-title","content"])):t.type==="OverlapSection"?(e(),l(N,{key:3,title:t.title,content:t.content,"image-url":t.image_url,"button-link":t.button_link},null,8,["title","content","image-url","button-link"])):t.type==="OverlapSecondSection"?(e(),l(F,{key:4,title:t.title||"",content:t.content||"","background-image":t.background_image||"",links:t.links||[]},null,8,["title","content","background-image","links"])):t.type==="ConcertItemSection"?(e(),l(L,{key:5,items:t.items||[],title:t.title,tabs:t.tabs},null,8,["items","title","tabs"])):t.type==="TabbedContentSection"?(e(),l(H,{key:6,tabs:t.tabs||[],title:t.title||""},null,8,["tabs","title"])):t.type==="ThumbnailGrid"?(e(),l(R,{key:7,items:t.items,title:t.title,"items-per-row":z(t.items?.length||0)},null,8,["items","title","items-per-row"])):(e(),a("div",rt,[o("p",null,"未知组件类型: "+d(t.type),1)]))],64))),128))])):T("",!0)]))}}),yt=C(ut,[["__scopeId","data-v-d50bbae8"]]);export{yt as default};
