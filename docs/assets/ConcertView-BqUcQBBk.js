import{d as k,a,b as s,n as x,t as d,e as S,F as y,f,h as e,_ as m,i as z,r as b,c as I,o as O,g as c}from"./index-CkSPqq_n.js";import{g as u}from"./pathUtils-jOM0BC_N.js";import{H as D,O as P,T as A}from"./OverlapSecondSection-DI8GOlR0.js";import{C as B,O as E,T as V}from"./ContentSection-Bs8JDY_p.js";import{C as F}from"./ConcertItemSection-BtTFTdQZ.js";const H={class:"title-section"},G={class:"title-wrapper"},N={class:"main-content"},R={class:"polaroid-section"},L={class:"polaroid-frame"},M={class:"polaroid-caption"},q={class:"content-section"},J={class:"header-section"},K={class:"title-text"},Q={key:0,class:"subtitle-text"},U={class:"playlist-section"},W={class:"part-title"},X={class:"song-list"},Y=k({__name:"TitleSection",props:{titleText:{default:"成都站歌单"},picture:{default:"/src/assets/background/Chengdu.jpg"},pictureTitle:{default:"成都印象"},subtitle:{default:"成都东安湖体育公园多功能体育馆 - 2025/05/24"},content:{default:()=>[]}},setup($){return(l,o)=>(e(),a("div",H,[s("div",G,[s("div",N,[s("div",R,[s("div",L,[s("div",{class:"polaroid-image",style:x({backgroundImage:`url(${l.picture})`})},null,4),s("div",M,d(l.pictureTitle),1)])]),s("div",q,[s("div",J,[s("h2",K,d(l.titleText),1),l.subtitle?(e(),a("div",Q,d(l.subtitle),1)):S("",!0)]),s("div",U,[(e(!0),a(y,null,f(l.content,(p,_)=>(e(),a("div",{key:_,class:"playlist-column"},[s("h3",W,d(p.tab),1),s("ul",X,[(e(!0),a(y,null,f(p.song,(g,r)=>(e(),a("li",{key:r,class:"song-item"},d(g),1))),128))])]))),128))])])])])]))}}),Z=m(Y,[["__scopeId","data-v-70518596"]]),tt={class:"concert-page"},et={key:0,class:"loading"},nt={key:1,class:"error"},ot={key:2,class:"concert-content"},st={key:8,class:"unknown-component"},at=k({__name:"ConcertView",setup($){const l=z(),o=l.params.city,p=l.path.includes("/open/")?"open":"universe",_=b(!0),g=b(""),r=b(null),T=I(()=>r.value?.content?[...r.value.content].sort((n,i)=>n.index-i.index):[]),w=n=>n===2||n===4?2:n===6?3:2,j=async()=>{try{_.value=!0,g.value="";const n=`concert/${p}`;let i=u(`${n}/concert_new.json`);p==="universe"?o==="beijing"||o==="beijing2024"?i=u(`${n}/concert_beijing2024.json`):o==="guangzhou"||o==="guangzhou2025"?i=u(`${n}/concert_guangzhou2025.json`):o==="chengdu"||o==="chengdu2025"?i=u(`${n}/concert_chengdu2025.json`):o==="shanghai"||o==="shanghai2025"?i=u(`${n}/concert_shanghai2025.json`):(o==="ningbo"||o==="ningbo2025")&&(i=u(`${n}/concert_ningbo2025.json`)):p==="open"&&(o==="guangzhou"||o==="guangzhou2023")&&(i=u(`${n}/concert_guangzhou2023.json`));const t=await fetch(i);if(!t.ok)throw new Error(`Failed to fetch concert data: ${t.status} ${t.statusText}`);const h=await t.json();if(Array.isArray(h)){const v=h.find(C=>C.title===o);if(!v)throw new Error(`未找到城市 ${o} 的音乐会数据`);r.value=v}else r.value=h}catch(n){g.value=n instanceof Error?n.message:"加载数据失败",console.error("加载音乐会数据失败:",n)}finally{_.value=!1}};return O(()=>{j()}),(n,i)=>(e(),a("div",tt,[_.value?(e(),a("div",et,"加载中...")):g.value?(e(),a("div",nt,d(g.value),1)):r.value?(e(),a("div",ot,[(e(!0),a(y,null,f(T.value,(t,h)=>(e(),a(y,{key:h},[t.type==="HeroSection"?(e(),c(D,{key:0,"background-image":t.background_image,title:t.title,"title-align":t.title_align,"title-margin":t.title_margin},null,8,["background-image","title","title-align","title-margin"])):t.type==="ContentSection"?(e(),c(B,{key:1,title:t.title,paragraphs:t.paragraphs},null,8,["title","paragraphs"])):t.type==="TitleSection"?(e(),c(Z,{key:2,"title-text":t.title_text||"",subtitle:t.subtitle||"",picture:t.picture||"","picture-title":t.picture_title||"",content:Array.isArray(t.content)?t.content:[]},null,8,["title-text","subtitle","picture","picture-title","content"])):t.type==="OverlapSection"?(e(),c(E,{key:3,title:t.title,content:t.content,"image-url":t.image_url,"button-link":t.button_link},null,8,["title","content","image-url","button-link"])):t.type==="OverlapSecondSection"?(e(),c(P,{key:4,title:t.title||"",content:t.content||"","background-image":t.background_image||"",links:t.links||[]},null,8,["title","content","background-image","links"])):t.type==="ConcertItemSection"?(e(),c(F,{key:5,items:t.items||[],title:t.title,tabs:t.tabs},null,8,["items","title","tabs"])):t.type==="TabbedContentSection"?(e(),c(A,{key:6,tabs:t.tabs||[],title:t.title||""},null,8,["tabs","title"])):t.type==="ThumbnailGrid"?(e(),c(V,{key:7,items:t.items,title:t.title,"items-per-row":w(t.items?.length||0)},null,8,["items","title","items-per-row"])):(e(),a("div",st,[s("p",null,"未知组件类型: "+d(t.type),1)]))],64))),128))])):S("",!0)]))}}),dt=m(at,[["__scopeId","data-v-0ef1e6b3"]]);export{dt as default};
