import{d as k,a,b as o,n as x,k as z,t as d,e as m,F as b,f as y,h as e,_ as S,i as I,r as f,c as O,o as P,g as c}from"./index-DsjOOODS.js";import{a as D,g as u}from"./pathUtils-DhIhMTi_.js";import{H as A,O as B,T as E}from"./OverlapSecondSection-j_Tb2nV1.js";import{C as V,O as F,T as H}from"./ContentSection-DvoQPQIM.js";import{C as G}from"./ConcertItemSection-BrNl8Api.js";const N={class:"title-section"},R={class:"title-wrapper"},L={class:"main-content"},M={class:"polaroid-section"},q={class:"polaroid-frame"},J={class:"polaroid-caption"},K={class:"content-section"},Q={class:"header-section"},U={class:"title-text"},W={key:0,class:"subtitle-text"},X={class:"playlist-section"},Y={class:"part-title"},Z={class:"song-list"},tt=k({__name:"TitleSection",props:{titleText:{default:"成都站歌单"},picture:{default:"/src/assets/background/Chengdu.jpg"},pictureTitle:{default:"成都印象"},subtitle:{default:"成都东安湖体育公园多功能体育馆 - 2025/05/24"},content:{default:()=>[]}},setup($){return(l,s)=>(e(),a("div",N,[o("div",R,[o("div",L,[o("div",M,[o("div",q,[o("div",{class:"polaroid-image",style:x({backgroundImage:`url(${z(D)(l.picture)})`})},null,4),o("div",J,d(l.pictureTitle),1)])]),o("div",K,[o("div",Q,[o("h2",U,d(l.titleText),1),l.subtitle?(e(),a("div",W,d(l.subtitle),1)):m("",!0)]),o("div",X,[(e(!0),a(b,null,y(l.content,(p,_)=>(e(),a("div",{key:_,class:"playlist-column"},[o("h3",Y,d(p.tab),1),o("ul",Z,[(e(!0),a(b,null,y(p.song,(g,r)=>(e(),a("li",{key:r,class:"song-item"},d(g),1))),128))])]))),128))])])])])]))}}),et=S(tt,[["__scopeId","data-v-64a2303b"]]),nt={class:"concert-page"},st={key:0,class:"loading"},ot={key:1,class:"error"},at={key:2,class:"concert-content"},it={key:8,class:"unknown-component"},lt=k({__name:"ConcertView",setup($){const l=I(),s=l.params.city,p=l.path.includes("/open/")?"open":"universe",_=f(!0),g=f(""),r=f(null),T=O(()=>r.value?.content?[...r.value.content].sort((n,i)=>n.index-i.index):[]),w=n=>n===2||n===4?2:n===6?3:2,j=async()=>{try{_.value=!0,g.value="";const n=`concert/${p}`;let i=u(`${n}/concert_new.json`);p==="universe"?s==="beijing"||s==="beijing2024"?i=u(`${n}/concert_beijing2024.json`):s==="guangzhou"||s==="guangzhou2025"?i=u(`${n}/concert_guangzhou2025.json`):s==="chengdu"||s==="chengdu2025"?i=u(`${n}/concert_chengdu2025.json`):s==="shanghai"||s==="shanghai2025"?i=u(`${n}/concert_shanghai2025.json`):(s==="ningbo"||s==="ningbo2025")&&(i=u(`${n}/concert_ningbo2025.json`)):p==="open"&&(s==="guangzhou"||s==="guangzhou2023")&&(i=u(`${n}/concert_guangzhou2023.json`));const t=await fetch(i);if(!t.ok)throw new Error(`Failed to fetch concert data: ${t.status} ${t.statusText}`);const h=await t.json();if(Array.isArray(h)){const v=h.find(C=>C.title===s);if(!v)throw new Error(`未找到城市 ${s} 的音乐会数据`);r.value=v}else r.value=h}catch(n){g.value=n instanceof Error?n.message:"加载数据失败",console.error("加载音乐会数据失败:",n)}finally{_.value=!1}};return P(()=>{j()}),(n,i)=>(e(),a("div",nt,[_.value?(e(),a("div",st,"加载中...")):g.value?(e(),a("div",ot,d(g.value),1)):r.value?(e(),a("div",at,[(e(!0),a(b,null,y(T.value,(t,h)=>(e(),a(b,{key:h},[t.type==="HeroSection"?(e(),c(A,{key:0,"background-image":t.background_image,title:t.title,"title-align":t.title_align,"title-margin":t.title_margin},null,8,["background-image","title","title-align","title-margin"])):t.type==="ContentSection"?(e(),c(V,{key:1,title:t.title,paragraphs:t.paragraphs},null,8,["title","paragraphs"])):t.type==="TitleSection"?(e(),c(et,{key:2,"title-text":t.title_text||"",subtitle:t.subtitle||"",picture:t.picture||"","picture-title":t.picture_title||"",content:Array.isArray(t.content)?t.content:[]},null,8,["title-text","subtitle","picture","picture-title","content"])):t.type==="OverlapSection"?(e(),c(F,{key:3,title:t.title,content:t.content,"image-url":t.image_url,"button-link":t.button_link},null,8,["title","content","image-url","button-link"])):t.type==="OverlapSecondSection"?(e(),c(B,{key:4,title:t.title||"",content:t.content||"","background-image":t.background_image||"",links:t.links||[]},null,8,["title","content","background-image","links"])):t.type==="ConcertItemSection"?(e(),c(G,{key:5,items:t.items||[],title:t.title,tabs:t.tabs},null,8,["items","title","tabs"])):t.type==="TabbedContentSection"?(e(),c(E,{key:6,tabs:t.tabs||[],title:t.title||""},null,8,["tabs","title"])):t.type==="ThumbnailGrid"?(e(),c(H,{key:7,items:t.items,title:t.title,"items-per-row":w(t.items?.length||0)},null,8,["items","title","items-per-row"])):(e(),a("div",it,[o("p",null,"未知组件类型: "+d(t.type),1)]))],64))),128))])):m("",!0)]))}}),gt=S(lt,[["__scopeId","data-v-0ef1e6b3"]]);export{gt as default};
